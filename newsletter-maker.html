<html>

  <head>
    <meta charset="UTF-8">
    <style>
      body {
        margin: 0;
      }

      .body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        font-size: 16px;
        line-height: 1.5;
        padding: 20px;

        color: #333;
        max-width: 600px;
        margin: 0 auto;
        background-color: white;
      }

      .email-container {
        background-color: white;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
        overflow: hidden;
      }

      .header {
        background-color: #ff7063;
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        margin: 0;
        font-size: 24px;
        font-weight: 600;
      }

      .section {
        padding: 30px;
        border-bottom: 1px solid #eee;
      }

      .section:last-child {
        border-bottom: none;
      }

      .section h2 {
        color: #ff7063;
        font-size: 18px;
        margin: 0 0 15px 0;
        font-weight: 600;
      }

      .section p {
        margin: 0 0 12px 0;
        color: #333333;
      }

      .section {
        background-color: #fffcfc;
      }

      .section:nth-child(2) {
        background-color: #f6f6f6;
      }

      .cta-button {
        display: inline-block;
        background-color: #ff7063;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 4px;
        font-weight: 500;
        margin-top: 10px;
      }

      .cta-button:hover {
        background-color: #e55a4c;
      }

      a {
        color: #000;
        text-decoration: underline;
      }

      .cta-button {
        text-decoration: none;
      }

      hr {
        border: 0;
        border-top: 1px solid #eee;
        margin: 20px 0;
      }

      .figure img {
        max-width: 100%;
        height: fit-content;
        border-radius: 4px;
        display: block;
        margin: 10px auto;
      }

      .figcaption {
        text-align: center;
        font-size: 14px;
        color: #666;
        font-style: italic;
      }

      .footer {
        margin-top: 40px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 14px;
        color: #666;
      }

      @media screen and (max-width: 500px) {
        .body {
          padding: 0;
          font-size: 14px;
          line-height: 1.4;
        }

        .footer {
          font-size: 12px;
        }

        .email-container {
          border: 0;
          border-radius: 0;
          border-bottom: 1px solid #e0e0e0;
        }

        .section {
          padding: 30px 12px;
        }
      }
    </style>
  </head>

  <body class="split">
    <div id="controls">
      <style>
        .split {
          display: flex;
          gap: 20px;
          /* justify-content: space-between; */
        }

        .body {
          min-width: 600px;
        }

        #controls {
          padding: 10px;
          width: 100%;
          display: flex;
          flex-direction: column;
          gap: 20px;

          textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            font-family: monospace;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 4px;
          }
        }
      </style>
      <script type="module">
        import { marked } from 'https://esm.sh/marked';

        const ta = Array.from(document.querySelectorAll('textarea'));

        const update = (e) => {
          const section = document.getElementById(e.target.name);
          section.innerHTML = marked.parse(e.target.value);
        }

        ta.forEach((el) => {
          el.addEventListener('input', update);
          update({ target: el });
        });

        const getHTML = () => {
          const frag = document.createDocumentFragment();
          frag.appendChild(document.documentElement.cloneNode(true));
          frag.querySelector('#controls').remove();
          return frag.firstChild.outerHTML;
        }

        const download = () => {
          const html = getHTML();
          const blob = new Blob([html], { type: 'text/html' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'newsletter.html';
          a.click();
          URL.revokeObjectURL(url);
        }

        document.getElementById('download').addEventListener('click', download);

        document.getElementById('copy').addEventListener('click', () => {
          const html = getHTML();
          navigator.clipboard.writeText(html).then(() => {
            alert('HTML copied to clipboard!');
          }).catch(err => {
            console.error('Failed to copy: ', err);
          });
        });

      </script>
      <textarea name="latest" id="" placeholder="Latest Event News">## Latest Event News
</textarea>
      <textarea name="archive" id="" placeholder="From Our Archive">## From Our Archive
</textarea>
      <textarea name="community" id="" placeholder="Community News">## Community News
</textarea>

      <div class="split">
        <button id="copy">Copy HTML</button>
        <button id="download">Download</button>
      </div>
    </div>
    <div class="body">
      <div class="email-container">
        <div id="latest" class="section">
        </div>

        <div id="archive" class="section">
        </div>

        <div id="community" class="section">
        </div>
      </div>
      <div class="footer">
        <a href="::unsubscribeUrl::">Unsubscribe</a> | The Old Casino, 28 Fourth Avenue, Hove, East Sussex, BN3 2PJ, UK
      </div>
    </div>
  </body>

</html>